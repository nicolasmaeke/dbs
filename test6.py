import csv
#from __future__ import print_function
import sklearn
from matplotlib.pyplot import plot, show
from scipy.cluster.vq import kmeans2, kmeans, vq
from sklearn.datasets import fetch_20newsgroups
from sklearn.decomposition import TruncatedSVD
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.feature_extraction.text import HashingVectorizer
from sklearn.feature_extraction.text import TfidfTransformer
from sklearn.pipeline import make_pipeline
from sklearn.preprocessing import Normalizer
from sklearn import metrics

from sklearn.cluster import KMeans, MiniBatchKMeans

import logging
from optparse import OptionParser
import sys
from time import time

from pylab import plot,show
from numpy import vstack,array
from numpy.random import rand
from scipy.cluster.vq import kmeans, vq, kmeans2


from pylab import plot,show
from numpy import vstack,array
from numpy.random import rand
from scipy.cluster.vq import kmeans, vq, kmeans2

# data generation
#data = vstack((rand(150,2) + array([.5,.5]),rand(150,2)))
mycsv = []
with open('test20.csv', 'rb') as csvfile:
     myreader = csv.reader(csvfile, delimiter=',', quotechar='"')
     for row in myreader:
         mycsv.append(row)



data = array([[1.00,7.00,29.00],
[1.00,1.00,21.00],
[1.00,1.00,23.00],
[34.00,55.00,5.00],
[28.00,49.00,10.00],
[1.00,6.00,15.00],
[1.00,7.00,17.00],
[10.00,14.00,12.00],
[0.00,1.00,8.00],
[0.00,1.00,13.00],
[0.00,4.00,7.00],
[46.00,60.00,13.00],
[4.00,2.00,11.00],
[2.00,2.00,9.00],
[1.00,5.00,2.00],
[8.00,51.00,12.00],
[0.00,2.00,14.00],
[7.00,19.00,10.00],
[2.00,1.00,9.00],
[1.00,1.00,5.00],
[0.00,4.00,7.00],
[0.00,1.00,8.00],
[2.00,3.00,6.00],
[0.00,1.00,13.00],
[1.00,1.00,4.00],
[11.00,23.00,13.00],
[2.00,2.00,6.00],
[2.00,1.00,9.00],
[0.00,1.00,12.00],
[34.00,31.00,11.00],
[0.00,1.00,20.00],
[0.00,1.00,20.00],
[191.00,219.00,22.00],
[2.00,1.00,4.00],
[2.00,1.00,12.00],
[0.00,1.00,16.00],
[0.00,1.00,5.00],
[3.00,1.00,12.00],
[3.00,1.00,12.00],
[3.00,1.00,15.00],
[1.00,1.00,17.00],
[1.00,1.00,14.00],
[0.00,1.00,22.00],
[4.00,5.00,5.00],
[0.00,1.00,20.00],
[0.00,1.00,12.00],
[0.00,1.00,13.00],
[6.00,7.00,6.00],
[0.00,1.00,22.00],
[0.00,12.00,13.00],
[0.00,1.00,6.00],
[69.00,63.00,10.00],
[1.00,2.00,9.00],
[0.00,1.00,17.00],
[0.00,1.00,15.00],
[1.00,7.00,10.00],
[2.00,1.00,4.00],
[2.00,1.00,12.00],
[2.00,1.00,13.00],
[1.00,2.00,12.00],
[2.00,2.00,15.00],
[7.00,6.00,13.00],
[2.00,1.00,18.00],
[2.00,1.00,12.00],
[2.00,1.00,15.00],
[0.00,1.00,6.00],
[0.00,4.00,18.00],
[3.00,13.00,15.00],
[0.00,1.00,16.00],
[0.00,2.00,7.00],
[0.00,1.00,17.00],
[1.00,2.00,7.00],
[3.00,3.00,8.00],
[1.00,1.00,13.00],
[0.00,3.00,21.00],
[0.00,1.00,7.00],
[0.00,1.00,20.00],
[0.00,1.00,8.00],
[1.00,2.00,9.00],
[1.00,4.00,10.00],
[3.00,2.00,12.00],
[0.00,1.00,19.00],
[0.00,1.00,14.00],
[0.00,1.00,4.00],
[0.00,1.00,14.00],
[2.00,2.00,12.00],
[0.00,1.00,5.00],
[0.00,1.00,15.00],
[1.00,1.00,4.00],
[0.00,1.00,9.00],
[2.00,11.00,4.00],
[3.00,1.00,12.00],
[7.00,4.00,3.00],
[3.00,1.00,16.00],
[2.00,4.00,7.00],
[1.00,1.00,8.00],
[0.00,3.00,11.00],
[3.00,5.00,6.00],
[0.00,1.00,15.00],
[0.00,1.00,16.00],
[0.00,2.00,9.00],
[2.00,14.00,14.00],
[0.00,2.00,14.00],
[0.00,1.00,12.00],
[2.00,1.00,8.00],
[2.00,1.00,16.00],
[2.00,1.00,8.00],
[0.00,1.00,11.00],
[0.00,1.00,14.00],
[1.00,1.00,14.00],
[1.00,1.00,11.00],
[1.00,1.00,4.00],
[0.00,1.00,10.00],
[247.00,313.00,10.00],
[6.00,53.00,13.00],
[0.00,1.00,4.00],
[2.00,2.00,5.00],
[0.00,3.00,16.00],
[3.00,2.00,7.00],
[1.00,2.00,5.00],
[1.00,1.00,6.00],
[1.00,1.00,9.00],
[0.00,4.00,10.00],
[0.00,4.00,14.00],
[0.00,2.00,13.00],
[9.00,59.00,9.00],
[0.00,1.00,17.00],
[1.00,2.00,13.00],
[0.00,1.00,14.00],
[2.00,1.00,15.00],
[1.00,1.00,14.00],
[0.00,4.00,14.00],
[2.00,1.00,9.00],
[5.00,4.00,14.00],
[1.00,2.00,15.00],
[0.00,1.00,11.00],
[0.00,1.00,19.00],
[0.00,1.00,10.00],
[1.00,1.00,16.00],
[0.00,1.00,7.00],
[0.00,1.00,10.00],
[0.00,1.00,14.00],
[0.00,1.00,9.00],
[0.00,1.00,18.00],
[1.00,1.00,12.00],
[0.00,1.00,9.00],
[0.00,1.00,5.00],
[1.00,1.00,8.00],
[1.00,2.00,12.00],
[1.00,1.00,12.00],
[1.00,1.00,11.00],
[0.00,1.00,10.00],
[0.00,1.00,16.00],
[0.00,1.00,7.00],
[0.00,1.00,13.00],
[0.00,1.00,13.00],
[1.00,1.00,14.00],
[1.00,1.00,6.00],
[0.00,1.00,16.00],
[0.00,2.00,14.00],
[0.00,2.00,15.00],
[0.00,1.00,7.00],
[10.00,11.00,6.00],
[0.00,1.00,13.00],
[0.00,1.00,10.00],
[0.00,1.00,6.00],
[0.00,1.00,9.00],
[0.00,1.00,9.00],
[0.00,4.00,12.00],
[0.00,1.00,13.00],
[0.00,4.00,11.00],
[0.00,1.00,16.00],
[0.00,1.00,8.00],
[1.00,1.00,8.00],
[7.00,8.00,14.00],
[4.00,2.00,12.00],
[6.00,2.00,6.00],
[4.00,1.00,16.00],
[6.00,2.00,14.00],
[2.00,3.00,11.00],
[2.00,1.00,15.00],
[0.00,1.00,11.00],
[2.00,1.00,13.00],
[0.00,1.00,9.00],
[1.00,1.00,7.00],
[1.00,1.00,9.00],
[0.00,1.00,13.00],
[0.00,1.00,16.00],
[0.00,1.00,10.00],
[0.00,1.00,12.00],
[0.00,1.00,12.00],
[0.00,1.00,11.00],
[2.00,2.00,14.00],
[2.00,1.00,11.00],
[0.00,1.00,9.00],
[0.00,1.00,14.00],
[0.00,1.00,11.00],
[1.00,1.00,8.00],
[0.00,1.00,10.00],
[0.00,1.00,12.00],
[1.00,2.00,10.00],
[0.00,2.00,5.00],
[0.00,1.00,13.00],
[2.00,1.00,8.00],
[1.00,2.00,14.00],
[1.00,1.00,12.00],
[0.00,1.00,14.00],
[2.00,1.00,15.00],
[2.00,1.00,9.00],
[2.00,1.00,10.00],
[0.00,1.00,10.00],
[0.00,1.00,18.00],
[0.00,1.00,12.00],
[0.00,1.00,4.00],
[1.00,1.00,14.00],
[0.00,1.00,13.00],
[0.00,1.00,4.00],
[0.00,2.00,13.00],
[0.00,1.00,15.00],
[2.00,1.00,13.00],
[2.00,1.00,21.00],
[2.00,1.00,13.00],
[1.00,1.00,16.00],
[0.00,1.00,11.00],
[0.00,1.00,19.00],
[1.00,1.00,10.00],
[0.00,1.00,14.00],
[0.00,1.00,23.00],
[1.00,1.00,13.00],
[1.00,1.00,10.00],
[0.00,1.00,13.00],
[2.00,1.00,16.00],
[2.00,1.00,18.00],
[2.00,1.00,12.00],
[2.00,1.00,14.00],
[3.00,2.00,4.00],
[0.00,1.00,11.00],
[0.00,1.00,15.00],
[0.00,1.00,14.00],
[0.00,1.00,12.00],
[0.00,1.00,13.00],
[0.00,1.00,12.00],
[0.00,1.00,23.00],
[10.00,10.00,10.00],
[0.00,1.00,6.00],
[0.00,1.00,5.00],
[0.00,1.00,4.00],
[0.00,1.00,7.00],
[0.00,8.00,10.00],
[0.00,1.00,13.00],
[0.00,1.00,11.00],
[0.00,1.00,8.00],
[0.00,2.00,13.00],
[0.00,2.00,14.00],
[4.00,1.00,10.00],
[4.00,1.00,10.00],
[4.00,1.00,10.00],
[5.00,2.00,10.00],
[5.00,2.00,10.00],
[7.00,9.00,10.00],
[0.00,1.00,9.00],
[1.00,1.00,7.00],
[1.00,1.00,15.00],
[1.00,1.00,13.00],
[0.00,1.00,9.00],
[4.00,6.00,11.00],
[5.00,6.00,14.00],
[4.00,2.00,12.00],
[2.00,1.00,18.00],
[1.00,1.00,7.00],
[0.00,3.00,17.00],
[0.00,1.00,12.00],
[1.00,2.00,5.00],
[0.00,1.00,13.00],
[0.00,1.00,7.00],
[2.00,1.00,15.00],
[2.00,1.00,8.00],
[0.00,1.00,14.00],
[0.00,1.00,2.00],
[1.00,1.00,7.00],
[18.00,13.00,10.00],
[2.00,3.00,10.00],
[0.00,1.00,12.00],
[1.00,1.00,12.00],
[5.00,1.00,7.00],
[5.00,1.00,7.00],
[5.00,1.00,10.00],
[0.00,1.00,10.00],
[2.00,3.00,3.00],
[0.00,1.00,12.00],
[0.00,1.00,5.00],
[1.00,2.00,9.00],
[1.00,1.00,10.00],
[2.00,1.00,15.00],
[8.00,2.00,11.00],
[8.00,2.00,9.00],
[8.00,2.00,15.00],
[11.00,3.00,10.00],
[5.00,1.00,14.00],
[0.00,1.00,9.00],
[0.00,1.00,8.00],
[0.00,1.00,10.00],
[1.00,1.00,13.00],
[4.00,1.00,13.00],
[4.00,2.00,5.00],
[4.00,1.00,7.00],
[4.00,1.00,12.00],
[4.00,1.00,11.00],
[1.00,1.00,3.00],
[1.00,1.00,3.00],
[23.00,18.00,13.00],
[2.00,1.00,14.00],
[0.00,1.00,4.00],
[0.00,1.00,3.00],
[1.00,1.00,14.00],
[6.00,21.00,10.00],
[0.00,1.00,7.00],
[0.00,1.00,29.00],
[1.00,1.00,13.00],
[1.00,1.00,7.00],
[0.00,1.00,11.00],
[0.00,1.00,10.00],
[0.00,1.00,9.00],
[2.00,2.00,14.00],
[0.00,1.00,12.00],
[2.00,1.00,13.00],
[3.00,8.00,15.00],
[0.00,2.00,12.00],
[0.00,1.00,11.00],
[2.00,1.00,11.00],
[2.00,1.00,11.00],
[2.00,1.00,4.00],
[0.00,1.00,12.00],
[1.00,1.00,5.00],
[1.00,1.00,11.00],
[2.00,1.00,7.00],
[0.00,1.00,11.00],
[1.00,1.00,15.00],
[0.00,1.00,11.00],
[0.00,1.00,6.00],
[2.00,1.00,14.00],
[1.00,1.00,22.00],
[0.00,1.00,10.00],
[0.00,1.00,9.00],
[7.00,7.00,12.00],
[4.00,4.00,13.00],
[0.00,1.00,8.00],
[1.00,1.00,8.00],
[0.00,1.00,12.00],
[0.00,1.00,12.00],
[0.00,1.00,12.00],
[0.00,1.00,12.00],
[1.00,1.00,15.00],
[8.00,7.00,10.00],
[0.00,1.00,6.00],
[0.00,1.00,21.00],
[0.00,1.00,4.00],
[0.00,1.00,14.00],
[7.00,9.00,12.00],
[0.00,1.00,13.00],
[1.00,1.00,8.00],
[1.00,1.00,14.00],
[4.00,1.00,5.00],
[4.00,1.00,8.00],
[4.00,1.00,5.00],
[4.00,1.00,7.00],
[0.00,1.00,21.00],
[34.00,24.00,5.00],
[8.00,6.00,10.00],
[10.00,7.00,12.00],
[0.00,1.00,11.00],
[2.00,1.00,16.00],
[2.00,1.00,5.00],
[0.00,1.00,8.00],
[0.00,1.00,16.00],
[2.00,1.00,13.00],
[4.00,2.00,11.00],
[1.00,1.00,12.00],
[0.00,1.00,10.00],
[25.00,15.00,9.00],
[0.00,1.00,10.00],
[0.00,1.00,11.00],
[2.00,1.00,13.00],
[5.00,3.00,8.00],
[2.00,1.00,11.00],
[0.00,1.00,5.00],
[0.00,1.00,5.00],
[1.00,2.00,11.00],
[2.00,1.00,8.00],
[2.00,1.00,6.00],
[3.00,1.00,12.00],
[3.00,1.00,12.00],
[2.00,1.00,5.00],
[0.00,1.00,18.00],
[0.00,1.00,10.00],
[1.00,1.00,4.00],
[4.00,2.00,20.00],
[3.00,1.00,10.00],
[3.00,1.00,12.00],
[4.00,2.00,8.00],
[1.00,1.00,5.00],
[1.00,2.00,14.00],
[2.00,1.00,8.00],
[1.00,1.00,8.00],
[1.00,1.00,5.00],
[0.00,1.00,11.00],
[4.00,1.00,11.00],
[0.00,2.00,5.00],
[0.00,1.00,12.00],
[0.00,1.00,9.00],
[1.00,1.00,6.00],
[1.00,1.00,5.00],
[2.00,1.00,1.00],
[2.00,1.00,13.00],
[2.00,1.00,4.00],
[0.00,1.00,16.00]])



# computing K-Means with K = 2 (2 clusters)
#centroids,_ = kmeans2(data,2)
centroids,_ = kmeans2(data,6)


print(centroids, _)
#print(kmeans2(data,15))

# assign each sample to a cluster
idx,_ = vq(data,centroids)

# some plotting using numpy's logical indexing
#plot(data[idx==0,0],data[idx==0,1],'ob',
#     data[idx==1,0],data[idx==1,1],'or')
#plot(centroids[:,0],centroids[:,1],'sg',markersize=8)

plot(data[idx==0,0],data[idx==0,1],'ob',
     data[idx==1,0],data[idx==1,1],'og',
     data[idx==2,0],data[idx==2,1],'or',
     data[idx==3,0],data[idx==3,1],'oc',
     data[idx==4,0],data[idx==4,1],'om',
     data[idx==5,0],data[idx==5,1],'ok')
plot(centroids[:,0],centroids[:,1],'sg',markersize=8)




show()